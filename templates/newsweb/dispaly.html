{% extends "index.html" %}
{% load static %}
{% block nav_article %}active{% endblock %}
{#{% block nav_mondaq %}active{% endblock %}#}
{% block head %}
<title>爬虫数据展示</title>
<link href="/static/css/plugins/dataTables/datatables.min.css" rel="stylesheet">
{% endblock %}

{% block re_content %}
    {% for info in data %}
    <div class="row">
        <div class="col-lg-10 col-lg-offset-1">
            <div class="ibox">
                <div class="ibox-content">
                    <div class="pull-right">
{#                        {% for authors in info.authors %}#}
                        <button class="btn btn-white btn-xs" type="button">{{ info.authors|slice:"7:" }}</button>
                        <button class="btn btn-info btn-xs" type="button" id="download" value="{{ info.id }}" name="{{ nav }}">下载</button>
                        <button class="btn btn-warning btn-xs" type="button" id="translation">翻译</button>
{#                            {% endfor %}#}
                    </div>
                    <div class="text-center article-title">
                    <span class="text-muted"><i class="fa fa-clock-o"></i>{{ info.create_date }}</span>
                        <h1>
                            {{ info.title }}
                        </h1>
                        <div style="text-align:left;" >
                        {{ info.content|safe}}
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-md-6">
                                <h5>Tags:</h5>
                                {% for tag in info.tags %}
                                <button class="btn btn-primary btn-xs" type="button">{{ tag }}</button>
                                {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
{% endblock %}

{% block js %}
    <script src="/static/js/inspinia.js"></script>
    <script src="/static/js/plugins/pace/pace.min.js"></script>
{% endblock %}

{% block scripts %}
    <script>
        $(function (){
            $("#download").click(function(){
                var id=$("#download").val();
                var article = $("#download").attr("name");
                console.log(id,article)
                $.ajax({
                     type:"POST",
                     url:"{% url 'api_download' %}",
                     data:JSON.stringify({'id':id,'article':article}),
                     datatype:'json',
                     success: function(data){
                     	console.log(data)
                     }
                })
            })
        })
    </script>
{% endblock %}